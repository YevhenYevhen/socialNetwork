{"version":3,"sources":["components/Dialogs/DialogItem/DialogItem.jsx","components/Dialogs/Message/Message.jsx","components/Dialogs/DialogsForm.jsx","components/Dialogs/Dialogs.jsx","components/Dialogs/DialogsContainer.jsx","components/Dialogs/Dialogs.module.css"],"names":["DialogItem","props","path","id","useState","active","setActive","to","onClick","setMessageMode","className","classes","activeDialog","dialog","dialogPhoto","src","photo","alt","dialogName","name","messages","text","Message","message","authUserPhoto","userPic","DialogsFormContainer","connect","state","dialogsPage","dispatch","sendMessage","messageId","action","sendMessageActionCreator","setMessageId","onSubmit","e","prevMessageId","render","handleSubmit","form","input","meta","messageTextarea","placeholder","sendButton","type","Dialogs","AlwaysScrollToBottom","elementRef","useRef","useEffect","current","scrollIntoView","ref","windowWidth","useWindowWidth","messageMode","messagesData","slice","reverse","dialogsElements","dialogsData","map","messagesElements","wrapper","back","dialogsContainer","messagesContainer","formContainer","compose","auth","messageText","withAuthRedirect","module","exports"],"mappings":"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","file":"static/js/4.bf83f941.chunk.js","sourcesContent":["import classes from './../Dialogs.module.css';\nimport { NavLink } from 'react-router-dom';\nimport { useState } from 'react';\n\n\nconst DialogItem = (props) => {\n    let path = '/dialogs/' + props.id;\n\n    const [active, setActive] = useState(false)\n\n    const handleClick = () => {\n        setActive(!active);\n        props.setMessageMode(true);\n    }\n    return (\n        <NavLink to={path}>\n            <div onClick={handleClick} className={active ? classes.activeDialog : classes.dialog}>\n                <img className={classes.dialogPhoto} src={props.photo} alt=\"\" />\n                <div>\n                    <div className={classes.dialogName}>{props.name}</div>\n                    <div>{props.messages[0].text}</div>\n                </div>\n            </div>\n        </NavLink>\n    )\n}\n\nexport default DialogItem;","import classes from './../Dialogs.module.css';\nimport userPic from '../../../assets/images/user.png';\n\n\nconst Message = (props) => {\n    return (\n        <div>\n            <div className={classes.message}>\n                <img className={classes.dialogPhoto} src={props.authUserPhoto || userPic} alt=\"\" />\n                {props.text}\n            </div>\n        </div>\n    )\n}\n\nexport default Message;","import { useState } from 'react';\nimport { Form, Field } from 'react-final-form'\nimport { connect } from 'react-redux';\nimport { sendMessageActionCreator } from '../../redux/dialogsReducer';\nimport classes from './Dialogs.module.css';\n\n\nexport const DialogsForm = (props) => {\n  const [messageId, setMessageId] = useState(36)\n\n  const onSubmit = (e) => {\n    if (e.message) {\n      props.sendMessage(e.message, messageId);\n      e.message = '';\n      setMessageId(prevMessageId => prevMessageId + 1)\n    }\n  }\n\n  return <Form\n    onSubmit={onSubmit}\n    render={({ handleSubmit }) => (\n      <form className={classes.form} onSubmit={handleSubmit}>\n        <Field\n          name=\"message\"\n          render={({ input, meta }) => (\n            <textarea className={classes.messageTextarea} placeholder='Enter your message' {...input} />\n          )}\n        />\n        <button className={classes.sendButton} type=\"submit\">Send</button>\n      </form>\n    )}\n  />\n}\n\n\nlet mapStateToProps = (state) => {\n  return {\n    dialogsPage: state.dialogsPage\n  }\n}\n\nlet mapDispatchToProps = (dispatch) => {\n  return {\n    sendMessage: (text, messageId) => {\n      let action = sendMessageActionCreator(text, messageId);\n      dispatch(action);\n    },\n  }\n}\n\nlet DialogsFormContainer = connect(mapStateToProps, mapDispatchToProps)(DialogsForm);\n\n\nexport default DialogsFormContainer;\n","import React, { useState, useEffect, useRef } from 'react';\nimport classes from './Dialogs.module.css';\nimport DialogItem from './DialogItem/DialogItem';\nimport Message from './Message/Message';\nimport DialogsFormContainer from './DialogsForm';\nimport { useWindowWidth } from '../Common/useWindowWidth'\n\n\nconst Dialogs = (props) => {\n\n    const AlwaysScrollToBottom = () => {\n        const elementRef = useRef();\n        useEffect(() => elementRef.current.scrollIntoView());\n        return <div ref={elementRef} />;\n    };\n    const windowWidth = useWindowWidth();\n\n    const [messageMode, setMessageMode] = useState(false)\n    const messages = props.dialogsPage.messagesData.slice().reverse();\n\n    const dialogsElements = props.dialogsPage.dialogsData.map(dialog => <DialogItem\n        setMessageMode={setMessageMode} messages={messages}\n        name={dialog.name} key={dialog.id} id={dialog.id} photo={dialog.photo} />);\n    const messagesElements = props.dialogsPage.messagesData.map(message => <Message key={message.id}\n        authUserPhoto={props.authUserPhoto} text={message.text} />);\n\n\n\n    if (windowWidth < 700)\n        return (<>\n            <div className={classes.wrapper}>\n                {messageMode && <div className={classes.back}\n                    onClick={() => setMessageMode(false)}><span>&larr; Back</span></div>}\n                {!messageMode && <div className={classes.dialogsContainer}>\n                    {dialogsElements}\n                </div>}\n                {messageMode && <>\n                    <div className={classes.messagesContainer}>\n                        {messagesElements}\n                        <AlwaysScrollToBottom />\n                    </div>\n                    <div className={classes.formContainer}>\n                        <DialogsFormContainer sendMessage={props.sendMessage} />\n                    </div>\n                </>\n                }\n            </div>\n        </>\n        )\n    if (windowWidth > 700)\n        return (\n            <div className={classes.wrapper}>\n                <div className={classes.dialogsContainer}>\n                    {dialogsElements}\n                </div>\n                <div className={classes.messagesContainer}>\n                    {messagesElements}\n                    <AlwaysScrollToBottom />\n                </div>\n                <div className={classes.formContainer}>\n                    <DialogsFormContainer sendMessage={props.sendMessage} />\n                </div>\n            </div>\n        )\n}\n\n\n\nexport default Dialogs;","import { sendMessageActionCreator } from './../../redux/dialogsReducer';\nimport Dialogs from './Dialogs';\nimport { connect } from 'react-redux';\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\nimport { compose } from 'redux';\n\n\nlet mapStateToProps = (state) => {\n    return {\n        dialogsPage: state.dialogsPage,\n        authUserPhoto: state.auth.authUserPhoto\n    }\n}\n\nlet mapDispatchToProps = (dispatch) => {\n    return {\n        sendMessage: (messageText) => {\n            dispatch(sendMessageActionCreator(messageText));\n        }\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps, mapDispatchToProps),\n    withAuthRedirect\n)(Dialogs)","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Dialogs_wrapper__1cRA8\",\"back\":\"Dialogs_back__1QNa9\",\"dialogsContainer\":\"Dialogs_dialogsContainer__3xYxC\",\"dialog\":\"Dialogs_dialog__lk_cw\",\"activeDialog\":\"Dialogs_activeDialog__3obRw\",\"dialogPhoto\":\"Dialogs_dialogPhoto__13kYp\",\"dialogName\":\"Dialogs_dialogName__16_Nc\",\"messagesContainer\":\"Dialogs_messagesContainer__eYApo\",\"message\":\"Dialogs_message__1xIDh\",\"formContainer\":\"Dialogs_formContainer__3s2rE\",\"form\":\"Dialogs_form__1EQXf\",\"messageTextarea\":\"Dialogs_messageTextarea__38AsC\",\"sendButton\":\"Dialogs_sendButton__14VVw\"};"],"sourceRoot":""}